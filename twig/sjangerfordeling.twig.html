<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(statistikk_sjangerfordeling_{{kommune.metadata.id}});

  function statistikk_sjangerfordeling_{{kommune.metadata.id}}() {
    var data = google.visualization.arrayToDataTable([
      ['Kategori', 'Antall personer'],
      {% for kategori, personer in kommune.sjangerfordeling_iar %}
      ['{{kategori|replace('_',' ')}}',{{personer}}]{{loop.last?'':','}}
      {% endfor %}
    ]);
    
	data.sort([{column: 1, desc:true}, {column: 0}]);

    var options = {
      title: 'Sjangerfordeling i Ã¥r',
      vAxis: {'minValue': 0},
      legend: {position: 'none'}
    };

    var chart = new google.visualization.ColumnChart(document.getElementById('statistikk_sjangerfordeling_{{kommune.metadata.id}}'));
    chart.draw(data, options);

    var id = "#sjangerfordeling_dlbtn_{{ kommune.metadata.id }}";
    //console.log('ID: '+id);
    jQuery(id).attr('href', chart.getImageURI());
    jQuery(id).attr('download', options.title+'.png');
  }
</script>

<div id="statistikk_sjangerfordeling_{{kommune.metadata.id}}" style="width: 100%; min-height: 300px;"></div>